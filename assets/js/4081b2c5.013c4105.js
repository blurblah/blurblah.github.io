"use strict";(self.webpackChunkblurblah_github_io=self.webpackChunkblurblah_github_io||[]).push([[56126],{10929:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>c,default:()=>t,frontMatter:()=>d,metadata:()=>o,toc:()=>l});var h=s(74848),p=s(28453);const d={title:"Ceph\uc744 \uc124\uce58\ud574\ubcf4\uc790",date:"2016-08-02",categories:["devops"],tags:["ceph","ceph-activate-permission-denied","ceph-\uc124\uc815","ceph-\uc124\uce58","\uac15\uc88c"]},c=void 0,o={permalink:"/2016/08/02/wp/ceph\uc744-\uc124\uce58\ud574\ubcf4\uc790",source:"@site/blog/wp/2016-08-02-ceph\uc744-\uc124\uce58\ud574\ubcf4\uc790.md",title:"Ceph\uc744 \uc124\uce58\ud574\ubcf4\uc790",description:'Ceph cluster \uad6c\uc131\uc744 \ud560 \ub54c \uac00\uc7a5 \uc911\uc694\ud55c \uc694\uc18c\ub294 ceph monitor\uc640 osd \uc774\ub2e4. "Ceph \uac00\ubccd\uac8c \uc0b4\ud3b4\ubcf4\uae30"\uc5d0\uc11c \uae30\uc220\ud55c \uac83\ucc98\ub7fc osd\ub294 \uc2e4\uc81c object \uc800\uc7a5\uc744 \ub2f4\ub2f9\ud558\uace0 monitor\ub294 node\uc758 \uc0c1\ud0dc \ud655\uc778\uc774\ub098 cluster map \uc815\ubcf4\ub97c \ub2f4\uace0 \uc788\uae30 \ub54c\ubb38. \uacf5\uc2dd \ubb38\uc11c\uc5d0 \uc788\ub294 \uc124\uce58 \ubc29\ubc95\uc740 manual\uacfc ceph-deploy\ub77c\ub294 \uc790\ub3d9\ud654 \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc774\uc6a9\ud558\ub294 \ubc29\ubc95\uc73c\ub85c \ub098\ub258\uc5b4 \uc788\ub294\ub370 ceph-deploy\ub97c \uc0ac\uc6a9\ud574 \ubcf4\uae30\ub85c \ud588\ub2e4. \uacf5\uc2dd \ubb38\uc11c\uc5d0 \ub204\ub77d\ub41c \ub0b4\uc6a9\ub3c4 \uc788\uace0 ceph-deploy \uc2a4\ud06c\ub9bd\ud2b8 \uc790\uccb4\uc5d0 \ubb38\uc81c\ub3c4 \uc788\ub294 \uac83 \uac19\uc544\uc11c \ud568\uaed8 \uae30\uc220\ud560 \uc0dd\uac01\uc774\ub2e4.',date:"2016-08-02T00:00:00.000Z",formattedDate:"August 2, 2016",tags:[{label:"ceph",permalink:"/tags/ceph"},{label:"ceph-activate-permission-denied",permalink:"/tags/ceph-activate-permission-denied"},{label:"ceph-\uc124\uc815",permalink:"/tags/ceph-\uc124\uc815"},{label:"ceph-\uc124\uce58",permalink:"/tags/ceph-\uc124\uce58"},{label:"\uac15\uc88c",permalink:"/tags/\uac15\uc88c"}],readingTime:9.41,hasTruncateMarker:!1,authors:[],frontMatter:{title:"Ceph\uc744 \uc124\uce58\ud574\ubcf4\uc790",date:"2016-08-02",categories:["devops"],tags:["ceph","ceph-activate-permission-denied","ceph-\uc124\uc815","ceph-\uc124\uce58","\uac15\uc88c"]},unlisted:!1,prevItem:{title:"Ceph \uac00\ubccd\uac8c \uc0b4\ud3b4\ubcf4\uae30",permalink:"/2016/08/02/wp/ceph-\uac00\ubccd\uac8c-\uc0b4\ud3b4\ubcf4\uae30"},nextItem:{title:"MyBatis\uc640 \uc2f8\uc6b0\uba74\uc11c \uc5bb\uc740 \uac83\ub4e4",permalink:"/2016/04/18/wp/mybatis\uc640-\uc2f8\uc6b0\uba74\uc11c-\uc5bb\uc740-\uac83\ub4e4"}},r={authorsImageUrls:[]},l=[{value:"1. \uc900\ube44",id:"1-\uc900\ube44",level:4},{value:"2. ceph-deploy \uc124\uce58",id:"2-ceph-deploy-\uc124\uce58",level:4},{value:"3. ntp / openssh-server \uc124\uce58",id:"3-ntp--openssh-server-\uc124\uce58",level:4},{value:"4. Ceph user \ucd94\uac00",id:"4-ceph-user-\ucd94\uac00",level:4},{value:"5. SSH keygen / \uacf5\uac1c\ud0a4 \ubcf5\uc0ac",id:"5-ssh-keygen--\uacf5\uac1c\ud0a4-\ubcf5\uc0ac",level:4},{value:"6. Network / firewall \uc124\uc815 (Optional)",id:"6-network--firewall-\uc124\uc815-optional",level:4},{value:"7. ceph-deploy\uac00 \uc0ac\uc6a9\ud560 \ub514\ub809\ud1a0\ub9ac \uc0dd\uc131",id:"7-ceph-deploy\uac00-\uc0ac\uc6a9\ud560-\ub514\ub809\ud1a0\ub9ac-\uc0dd\uc131",level:4},{value:"8. Monitor node \uc0dd\uc131 / pool size \uc124\uc815",id:"8-monitor-node-\uc0dd\uc131--pool-size-\uc124\uc815",level:4},{value:"9. Ceph \uc124\uce58",id:"9-ceph-\uc124\uce58",level:4},{value:"10. Monitor \ucd08\uae30\ud654",id:"10-monitor-\ucd08\uae30\ud654",level:4},{value:"11. OSD \uc124\uc815",id:"11-osd-\uc124\uc815",level:4},{value:"12. Node \uc124\uc815 \ubc0f keyring \ud30c\uc77c \ubcf5\uc0ac",id:"12-node-\uc124\uc815-\ubc0f-keyring-\ud30c\uc77c-\ubcf5\uc0ac",level:4},{value:"13. Health check",id:"13-health-check",level:4},{value:"14. \uacb0\ub860",id:"14-\uacb0\ub860",level:4}];function i(e){const n={a:"a",h4:"h4",img:"img",p:"p",...(0,p.R)(),...e.components};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(n.p,{children:['Ceph cluster \uad6c\uc131\uc744 \ud560 \ub54c \uac00\uc7a5 \uc911\uc694\ud55c \uc694\uc18c\ub294 ceph monitor\uc640 osd \uc774\ub2e4. "',(0,h.jsx)(n.a,{href:"http://192.168.10.23:8088/1298",children:"Ceph \uac00\ubccd\uac8c \uc0b4\ud3b4\ubcf4\uae30"}),'"\uc5d0\uc11c \uae30\uc220\ud55c \uac83\ucc98\ub7fc osd\ub294 \uc2e4\uc81c object \uc800\uc7a5\uc744 \ub2f4\ub2f9\ud558\uace0 monitor\ub294 node\uc758 \uc0c1\ud0dc \ud655\uc778\uc774\ub098 cluster map \uc815\ubcf4\ub97c \ub2f4\uace0 \uc788\uae30 \ub54c\ubb38. \uacf5\uc2dd \ubb38\uc11c\uc5d0 \uc788\ub294 \uc124\uce58 \ubc29\ubc95\uc740 manual\uacfc ceph-deploy\ub77c\ub294 \uc790\ub3d9\ud654 \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc774\uc6a9\ud558\ub294 \ubc29\ubc95\uc73c\ub85c \ub098\ub258\uc5b4 \uc788\ub294\ub370 ceph-deploy\ub97c \uc0ac\uc6a9\ud574 \ubcf4\uae30\ub85c \ud588\ub2e4. \uacf5\uc2dd \ubb38\uc11c\uc5d0 \ub204\ub77d\ub41c \ub0b4\uc6a9\ub3c4 \uc788\uace0 ceph-deploy \uc2a4\ud06c\ub9bd\ud2b8 \uc790\uccb4\uc5d0 \ubb38\uc81c\ub3c4 \uc788\ub294 \uac83 \uac19\uc544\uc11c \ud568\uaed8 \uae30\uc220\ud560 \uc0dd\uac01\uc774\ub2e4.']}),"\n",(0,h.jsxs)(n.p,{children:["\ucc38\uace0 : ",(0,h.jsx)(n.a,{href:"http://docs.ceph.com/docs/master/start/quick-ceph-deploy/",children:"ceph-deploy\ub97c \uc0ac\uc6a9\ud55c Ceph \uc124\uce58 \uacf5\uc2dd\ubb38\uc11c"})]}),"\n",(0,h.jsx)(n.p,{children:"\xa0"}),"\n",(0,h.jsx)(n.h4,{id:"1-\uc900\ube44",children:"1. \uc900\ube44"}),"\n",(0,h.jsx)(n.p,{children:"(1) VM"}),"\n",(0,h.jsx)(n.p,{children:"\uc2e4\uc81c \uaf2d \ud544\uc694\ud55c \uac83\uc740 \uc544\ub2c8\uc9c0\ub9cc ceph-deploy\ub85c \uac01 node\ub97c \uad00\ub9ac\ud558\uae30 \uc704\ud55c ceph-admin\uacfc cluster\ub97c \uad6c\uc131\ud560 ceph-node01, ceph-node02 \ucd1d 3\ub300\uc758 VM (Ubuntu 14.04)\uc744 \uc900\ube44\ud588\ub2e4."}),"\n",(0,h.jsx)(n.p,{children:"(2) SSH / hosts \uc124\uc815"}),"\n",(0,h.jsx)(n.p,{children:"\ud3b8\uc758\ub97c \uc704\ud574 ~/.ssh/config\uc5d0 \uac01 node\uc758 Hostname, User \ub4f1\ub85d."}),"\n",(0,h.jsx)(n.p,{children:"ceph-deploy\uac00 \uc77c\ubd80 \uc124\uc815\uc5d0\uc11c \uac01 node\uc758 \uc2e4\uc81c hostname\uc744 \uac00\uc9c0\uace0 \ud30c\uc77c\uc744 \uc0dd\uc131\ud558\uac70\ub098 \ucc98\ub9ac\ud558\ub294 \uacbd\uc6b0\uac00 \uc788\uace0 host \uc778\uc2dd\uc744 \uc704\ud574 /etc/hosts\uc5d0 \uc2e4\uc81c cluster node\uc758 hostname\uacfc IP\ub97c \ub4f1\ub85d\ud574\ub454\ub2e4. \uc544\ub798\ub294 ceph-admin\uc5d0\uc11c \uc9c0\uc815\ud55c hostname\uc774 \uc2e4\uc81c node\uc758 hostname\uacfc \ub2ec\ub77c\uc11c \uc0dd\uae30\ub294 \uc624\ub958 (admin node\uc5d0\uc11c \ud558\uc704 node\uc758 hostname\uc744 node1\uc774\ub77c\uace0 \uc9c0\uc815\ud588\uc744 \ub54c ceph-deploy\uac00 ceph-mon.node1.asok \ud30c\uc77c\uc744 \ucc3e\uc73c\ub824\uace0 \ud558\uc9c0\ub9cc \uc2e4\uc81c \uadf8 \uacbd\ub85c\uc5d0 \uac00\ubcf4\uba74 ceph-mon-ceph-node01.asok \ud30c\uc77c\uc774 \uc0dd\uc131\ub418\uc5b4 \uc788\uc5c8\ub2e4)"}),"\n",(0,h.jsx)(n.p,{children:(0,h.jsx)(n.a,{href:"https://blurblah.net/wp-content/uploads/2016/08/ceph-install-host-error.png",children:(0,h.jsx)(n.img,{alt:"ceph-install-host-error",src:s(17892).A+"",width:"697",height:"501"})})}),"\n",(0,h.jsx)(n.h4,{id:"2-ceph-deploy-\uc124\uce58",children:"2. ceph-deploy \uc124\uce58"}),"\n",(0,h.jsx)(n.p,{children:"ceph-admin\uc5d0\uc11c \uc544\ub798\uc758 command\ub85c \uc124\uce58\ud558\uba74 \ub418\ub294\ub370 hammer (ceph release name)\ub77c\uace0 \uc9c0\uc815\ud574\ub3c4 \uc774\ud6c4 ceph \uc124\uce58\uacfc\uc815\uc5d0\uc11c ceph-deploy\uac00 repository\ub97c \uc790\ub3d9\uc73c\ub85c \ucd5c\uc2e0\uc778 jewel\ub85c \ubcc0\uacbd\ud574\ubc84\ub9b0\ub2e4."}),"\n",(0,h.jsx)(n.p,{children:"[bash]"}),"\n",(0,h.jsxs)(n.p,{children:["wget -q -O- '",(0,h.jsx)(n.a,{href:"https://download.ceph.com/keys/release.asc",children:"https://download.ceph.com/keys/release.asc"}),"' | sudo apt-key add -"]}),"\n",(0,h.jsxs)(n.p,{children:["echo deb ",(0,h.jsx)(n.a,{href:"http://download.ceph.com/debian-hammer/",children:"http://download.ceph.com/debian-hammer/"}),"\xa0$(lsb_release -sc) main | sudo tee /etc/apt/sources.list.d/ceph.list"]}),"\n",(0,h.jsx)(n.p,{children:"sudo apt-get update && sudo apt-get install ceph-deploy"}),"\n",(0,h.jsx)(n.p,{children:"[/bash]"}),"\n",(0,h.jsx)(n.p,{children:"\xa0"}),"\n",(0,h.jsx)(n.h4,{id:"3-ntp--openssh-server-\uc124\uce58",children:"3. ntp / openssh-server \uc124\uce58"}),"\n",(0,h.jsx)(n.p,{children:"Ubuntu 14.04 \uc124\uce58\ud588\uc744 \ub54c \uc774\ubbf8 ntp\uc640 openssh-server\uac00 \uc124\uce58\ub41c \uc0c1\ud0dc\uc600\uc9c0\ub9cc \ud639\uc2dc \uc124\uce58\ub418\uc9c0 \uc54a\uc740 \uc0c1\ud0dc\ub77c\uba74 \uc124\uce58\ud574\ub454\ub2e4. (NTP\ub294 \uac01 node\uac04 \uc2dc\uac04 \ub3d9\uae30\ub97c \uc704\ud574 \ud544\uc694\ud558\ub2e4\uace0 \uac00\uc774\ub4dc \ud558\uace0\uc788\uc74c)"}),"\n",(0,h.jsx)(n.p,{children:"\xa0"}),"\n",(0,h.jsx)(n.h4,{id:"4-ceph-user-\ucd94\uac00",children:"4. Ceph user \ucd94\uac00"}),"\n",(0,h.jsx)(n.p,{children:"\uacf5\uc2dd\ubb38\uc11c\uc5d0\ub294 ceph \uc124\uce58\uc640 \uad00\ub9ac\ub97c \uc704\ud55c \ubcc4\ub3c4 user\ub97c \uc0dd\uc131\ud558\ub77c\uace0 \ub418\uc5b4 \uc788\uace0 \ubcf4\uc548 \ubc0f \uae30\ud0c0 \uc774\uc720\ub85c ceph\uc774\ub77c\ub294 \uc774\ub984\uc740 \uc0ac\uc6a9\ud558\uc9c0 \ub9d0\ub77c\uace0 \uba85\uc2dc\ub418\uc5b4 \uc788\uc5b4\uc11c cephuser\ub77c\ub294 \uc774\ub984\uc73c\ub85c \uc0ac\uc6a9\uc790\ub97c \uc0dd\uc131\ud558\uace0 sudoer\ub85c \ub4f1\ub85d\ud588\uc73c\ub098 \uc2e4\uc81c \ud30c\uc77c \uc0dd\uc131 \ub4f1\uc758 \uc791\uc5c5\uc740 ceph\uc774\ub77c\ub294 \uc0ac\uc6a9\uc790\ub85c \uc9c4\ud589\uc774 \ub418\ub294 \uac83\uc73c\ub85c \ubcf4\uc778\ub2e4. \xa0\uc544\ub798\uc758 command\ub97c \uc774\uc6a9\ud558\uac70\ub098 \ubcc4\ub3c4\uc758 \ubc29\ubc95\uc73c\ub85c \ubaa8\ub4e0 node\uc5d0\uc11c user \ucd94\uac00 (home \ub514\ub809\ud1a0\ub9ac\ub294 \ucd94\uac00\ub418\uc5b4\uc57c \ud568)"}),"\n",(0,h.jsx)(n.p,{children:"[bash]"}),"\n",(0,h.jsx)(n.p,{children:"sudo useradd -d /home/cephuser -m cephuser"}),"\n",(0,h.jsx)(n.p,{children:"sudo passwd cephuser"}),"\n",(0,h.jsx)(n.p,{children:"# set password"}),"\n",(0,h.jsx)(n.p,{children:"\xa0"}),"\n",(0,h.jsxs)(n.p,{children:['echo "cephuser ALL = (root) NOPASSWD',":ALL",'" | sudo tee /etc/sudoers.d/cephuser']}),"\n",(0,h.jsx)(n.p,{children:"sudo chmod 440 /etc/sudoers.d/cephuser"}),"\n",(0,h.jsx)(n.p,{children:"[/bash]"}),"\n",(0,h.jsx)(n.p,{children:"\xa0"}),"\n",(0,h.jsx)(n.h4,{id:"5-ssh-keygen--\uacf5\uac1c\ud0a4-\ubcf5\uc0ac",children:"5. SSH keygen / \uacf5\uac1c\ud0a4 \ubcf5\uc0ac"}),"\n",(0,h.jsx)(n.p,{children:"ceph-deploy\uac00 \uc0ac\uc6a9\ud560 \ub54c\uac00 \uc788\uc73c\ubbc0\ub85c ceph-admin\uc758 ssh keypair\ub97c \uc0dd\uc131\ud558\uace0 \uac01 node\uc5d0 \ubcf5\uc0ac\ud574\uc900\ub2e4."}),"\n",(0,h.jsx)(n.p,{children:"[bash]"}),"\n",(0,h.jsx)(n.p,{children:"ssh-keygen"}),"\n",(0,h.jsx)(n.p,{children:"ssh-copy-id cephuser@ceph-node01"}),"\n",(0,h.jsx)(n.p,{children:"ssh-copy-id cephuser@ceph-node02"}),"\n",(0,h.jsx)(n.p,{children:"[/bash]"}),"\n",(0,h.jsx)(n.p,{children:"\xa0"}),"\n",(0,h.jsx)(n.h4,{id:"6-network--firewall-\uc124\uc815-optional",children:"6. Network / firewall \uc124\uc815 (Optional)"}),"\n",(0,h.jsx)(n.p,{children:"Public network, cluster (internal) network\uc73c\ub85c \ubd84\ub9ac\ud574\uc11c \uc124\uc815\ud558\ub294 \ub0b4\uc6a9\uc774 \ubb38\uc11c\uc5d0 \uc788\uc73c\ub098 \ub0b4\ubd80 IP\ub85c\ub9cc \uc5f0\uacb0\ud560 \uc0dd\uac01\uc774\uc5b4\uc11c \ubcc4\ub3c4 \uc870\uce58\uc5c6\uc774 \ub118\uc5b4\uac10"}),"\n",(0,h.jsx)(n.p,{children:"\xa0"}),"\n",(0,h.jsx)(n.h4,{id:"7-ceph-deploy\uac00-\uc0ac\uc6a9\ud560-\ub514\ub809\ud1a0\ub9ac-\uc0dd\uc131",children:"7. ceph-deploy\uac00 \uc0ac\uc6a9\ud560 \ub514\ub809\ud1a0\ub9ac \uc0dd\uc131"}),"\n",(0,h.jsx)(n.p,{children:"\ud604\uc7ac\uc758 working directory\uc5d0\uc11c ceph-deploy\uac00 \ud544\uc694\ud55c \ud30c\uc77c\ub4e4\uc744 \uc0dd\uc131\ud558\uace0 \uac00\uc838\uc624\ubbc0\ub85c \ubcc4\ub3c4 \ub514\ub809\ud1a0\ub9ac\ub97c \ub9cc\ub4e4\uace0 \uadf8 \uc548\uc5d0\uc11c ceph-deploy\ub97c \uc2e4\ud589\ud558\ub294\uac8c \uc88b\ub2e4."}),"\n",(0,h.jsx)(n.p,{children:"[bash]"}),"\n",(0,h.jsx)(n.p,{children:"mkdir cluster && cd cluster"}),"\n",(0,h.jsx)(n.p,{children:"[/bash]"}),"\n",(0,h.jsx)(n.p,{children:"\xa0"}),"\n",(0,h.jsx)(n.h4,{id:"8-monitor-node-\uc0dd\uc131--pool-size-\uc124\uc815",children:"8. Monitor node \uc0dd\uc131 / pool size \uc124\uc815"}),"\n",(0,h.jsx)(n.p,{children:"Monitor\uac00 \ub3cc\uc544\uac08 node\ub97c \uc9c0\uc815\ud558\ub294 \ub0b4\uc6a9\uc73c\ub85c \ud3b8\uc758\uc0c1 ceph-node01\ub9cc \uc9c0\uc815 (\ub098\uc911\uc5d0 \ucd94\uac00\ub3c4 \uac00\ub2a5)"}),"\n",(0,h.jsx)(n.p,{children:"[bash]"}),"\n",(0,h.jsx)(n.p,{children:"ceph-deploy new ceph-node01"}),"\n",(0,h.jsx)(n.p,{children:"[/bash]"}),"\n",(0,h.jsx)(n.p,{children:"\uc774 \uacfc\uc815\uc744 \uac70\uce58\uba74 working directory\uc5d0 ceph.conf \ud30c\uc77c\uc774 \uc0dd\uc131\ub418\ub294\ub370 osd pool \ud06c\uae30\ub97c \uc9c0\uc815\ud574\uc918\uc57c \ud55c\ub2e4. osd \ud558\ub098\uc5d0 \ud30c\uc77c\uc744 \uc800\uc7a5\ud558\uace0 \ud558\ub098\ub294 replicate \uc6a9\ub3c4\ub85c \uc0ac\uc6a9\ud560\uac70\ub77c 2\ub85c \uc9c0\uc815"}),"\n",(0,h.jsx)(n.p,{children:"[bash]"}),"\n",(0,h.jsx)(n.p,{children:"# add this in global section of ceph.conf"}),"\n",(0,h.jsx)(n.p,{children:"osd pool default size = 2"}),"\n",(0,h.jsx)(n.p,{children:"[/bash]"}),"\n",(0,h.jsx)(n.p,{children:"\xa0"}),"\n",(0,h.jsx)(n.h4,{id:"9-ceph-\uc124\uce58",children:"9. Ceph \uc124\uce58"}),"\n",(0,h.jsx)(n.p,{children:"\uc774\uc81c ceph\uacfc \uad00\ub828\ub41c \uac83\ub4e4\uc744 \uc124\uce58\ud558\ub294 \uacfc\uc815\uc744 \uc218\ud589\ud558\uba74 \ub41c\ub2e4. Admin node\uc5d0\uc11c \uc124\uce58\ud560 node\ub97c \uc9c0\uc815\ud560 \uc218 \uc788\ub294\ub370 \uc544\ub798\ucc98\ub7fc admin node \ud3ec\ud568 \uc804\uccb4 node\uc5d0 \uc124\uce58\ud558\ub3c4\ub85d \ud588\ub2e4. (\uc774 \uacfc\uc815\uc778\uc9c0 \ub2e4\ub978 \uacfc\uc815\uc5d0\uc11c \uc790\ub3d9\uc73c\ub85c ceph repository\uac00 \ucd5c\uc2e0\uc778 jewel\ub85c \ubcc0\uacbd\ub418\ub294\ub370 release \ub4f1\uc758 option\uc774 \uc788\uc5b4\uc11c \ub2e4\ub978 \ubc84\uc804 \uc124\uce58\uac00 \uac00\ub2a5\ud55c \uac83\ucc98\ub7fc \ubcf4\uc774\uc9c0\ub9cc \uc2e4\uc81c option\uc744 \uc918\uc11c hammer\ub85c \uac15\uc81c \uc124\uc815\ud55c \uacb0\uacfc \uc624\ub958 \ubc1c\uc0dd)"}),"\n",(0,h.jsx)(n.p,{children:"[bash]"}),"\n",(0,h.jsx)(n.p,{children:"ceph-deploy install ceph-admin ceph-node01 ceph-node02"}),"\n",(0,h.jsx)(n.p,{children:"[/bash]"}),"\n",(0,h.jsx)(n.p,{children:"\xa0"}),"\n",(0,h.jsx)(n.h4,{id:"10-monitor-\ucd08\uae30\ud654",children:"10. Monitor \ucd08\uae30\ud654"}),"\n",(0,h.jsx)(n.p,{children:"Ceph\uae4c\uc9c0 \uc124\uce58\ud588\uc73c\uba74 monitor \ucd08\uae30\ud654\ub97c \ud574\uc57c \ud55c\ub2e4."}),"\n",(0,h.jsx)(n.p,{children:"[bash]"}),"\n",(0,h.jsx)(n.p,{children:"ceph-deploy mon create-initial"}),"\n",(0,h.jsx)(n.p,{children:"[/bash]"}),"\n",(0,h.jsx)(n.p,{children:"\xa0"}),"\n",(0,h.jsx)(n.h4,{id:"11-osd-\uc124\uc815",children:"11. OSD \uc124\uc815"}),"\n",(0,h.jsx)(n.p,{children:"(1) OSD\uac00 \uc0ac\uc6a9\ud560 \uacbd\ub85c \ucd94\uac00"}),"\n",(0,h.jsx)(n.p,{children:"OSD\uac00 \ub3cc\uc544\uac08 \uac01 node\uc5d0\uc11c \xa0osd\uac00 \uc0ac\uc6a9\ud560 \uacbd\ub85c\ub97c \ucd94\uac00\ud574\uc900\ub2e4. \uc5ec\uae30\uc11c \uc911\uc694\ud55c\uac8c \ub4a4\uc5d0 \uc788\ub294 \uc22b\uc790\ub97c \uc784\uc758\uc758 \uc22b\uc790\ub85c \ubcc0\uacbd\ud558\uba74 \ub098\uc911\uc5d0 activate \uacfc\uc815\uc5d0\uc11c \uc624\ub958\uac00 \ubc1c\uc0dd\ud55c\ub2e4. Manual \uc124\uce58 \uacfc\uc815\uc744 \uc7a0\uae50 \ubd24\uc744 \ub54c osd node \uac01\uac01\uc5d0 \uc21c\uc11c\ub300\ub85c \uc22b\uc790\ub97c \ubd80\uc5ec\ud574\uc11c \uadf8 \uc22b\uc790\ub97c \uc774\uc6a9\ud574 \ub0b4\ubd80\uc801\uc73c\ub85c \ubb54\uac00 \uc791\uc5c5\uc744 \ud558\ub294 \uac83 \uac19\uc740\ub370 \uc798 \uc774\ud574\uac00 \uc548\ub418\ub294 \ubd80\ubd84\uc774\ub2e4."}),"\n",(0,h.jsx)(n.p,{children:"[bash]"}),"\n",(0,h.jsx)(n.p,{children:"# in ceph-node01"}),"\n",(0,h.jsx)(n.p,{children:"sudo mkdir /var/local/osd0"}),"\n",(0,h.jsx)(n.p,{children:"\xa0"}),"\n",(0,h.jsx)(n.p,{children:"# in ceph-node02"}),"\n",(0,h.jsx)(n.p,{children:"sudo mkdir /var/local/osd1"}),"\n",(0,h.jsx)(n.p,{children:"[/bash]"}),"\n",(0,h.jsx)(n.p,{children:"(2) Prepare osd"}),"\n",(0,h.jsx)(n.p,{children:"\uc774\uc81c osd\ub97c \uc900\ube44\ud558\ub294 \ucd08\uae30\ud654 \uacfc\uc815\uc778\ub370 ceph-admin\uc5d0\uc11c \uc544\ub798\uc758 command\ub97c \uc2e4\ud589\ud55c \ud6c4 \uba54\uc138\uc9c0\ub97c \uc720\uc2ec\ud788 \ubcf4\uba74 \uc0dd\uc131\ud558\ub294 \uba87 \uac1c \ud30c\uc77c\uc758 owner\ub97c \ubcc0\uacbd\ud558\ub294 \uacfc\uc815\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4."}),"\n",(0,h.jsx)(n.p,{children:"[bash]"}),"\n",(0,h.jsx)(n.p,{children:"ceph-deploy osd prepare ceph-node01:/var/local/osd0 ceph-node02:/var/local/osd1"}),"\n",(0,h.jsx)(n.p,{children:"[/bash]"}),"\n",(0,h.jsxs)(n.p,{children:[(0,h.jsx)(n.a,{href:"https://blurblah.net/wp-content/uploads/2016/08/ceph-chown.png",children:(0,h.jsx)(n.img,{alt:"ceph-chown",src:s(89266).A+"",width:"697",height:"501"})}),"(3) Activate osd"]}),"\n",(0,h.jsx)(n.p,{children:"(Activate \ud558\uae30 \uc804\uc5d0 \uac01 osd path\uc758 owner, group\uc744 ceph\uc73c\ub85c \ubcc0\uacbd\ud574\uc8fc\uc5b4\uc57c \ud568)"}),"\n",(0,h.jsx)(n.p,{children:"[bash]"}),"\n",(0,h.jsx)(n.p,{children:"# in nodes"}),"\n",(0,h.jsxs)(n.p,{children:["sudo chown -R ceph",":ceph"," /var/local/osdX"]}),"\n",(0,h.jsx)(n.p,{children:"[/bash]"}),"\n",(0,h.jsx)(n.p,{children:"\uc704 \uadf8\ub9bc\ucc98\ub7fc \uc77c\ubd80 \ud30c\uc77c\uc758 owner \uc124\uc815\uacfc\uc815\uc744 \uc5b8\uae09\ud55c \uc774\uc720\ub294 activate \uacfc\uc815\uc5d0\uc11c \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uae30 \ub54c\ubb38\uc778\ub370"}),"\n",(0,h.jsxs)(n.p,{children:[(0,h.jsx)(n.a,{href:"https://blurblah.net/wp-content/uploads/2016/08/ceph-osd-permission-error.png",children:(0,h.jsx)(n.img,{alt:"ceph-osd-permission-error",src:s(71374).A+"",width:"697",height:"501"})}),"\uc7ac\ubbf8\uc788\ub294\uac8c \uc544\ub798 \uadf8\ub9bc\uc5d0\uc11c\ucc98\ub7fc ceph-deploy\uac00 \uba87 \uac1c \ud30c\uc77c\ub9cc owner \uc9c0\uc815\uc744 \uc790\ub3d9\uc73c\ub85c \ud558\uace0 \ub514\ub809\ud1a0\ub9ac \uc790\uccb4\ub294 \uc0dd\uc131\ud588\uc744 \ub54c\uc758 \uc0ac\uc6a9\uc790 \uc18c\uc720\ub85c \uadf8\ub300\ub85c \ub450\uace0 \uc788\uc5b4\uc11c \uad8c\ud55c \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud560 \uc218 \ubc16\uc5d0 \uc5c6\ub2e4. (\uacf5\uc2dd \ubb38\uc11c\uc5d0\uc11c \ub204\ub77d\ub41c \ub0b4\uc6a9\uc774\uae30\ub3c4 \ud558\uace0 \uc2a4\ud06c\ub9bd\ud2b8 \uc790\uccb4\uac00 \ubb38\uc81c\uac00 \uc788\ub2e4\uace0 \ubcf4\uc5ec\uc9d0)"]}),"\n",(0,h.jsxs)(n.p,{children:[(0,h.jsx)(n.a,{href:"https://blurblah.net/wp-content/uploads/2016/08/ceph-osd-path-permission.png",children:(0,h.jsx)(n.img,{alt:"ceph-osd-path-permission",src:s(23827).A+"",width:"697",height:"501"})}),"\uadf8\ub807\uae30 \ub54c\ubb38\uc5d0 \uc0ac\uc804\uc5d0 osd\uac00 \uc0ac\uc6a9\ud560 \uacbd\ub85c\uc758 owner\ub97c \ubcc0\uacbd\ud574\uc8fc\ub294\uac8c \uaf2d \ud544\uc694\ud558\ub2e4. Activate\uc740 \uc544\ub798\uc758 command \uc2e4\ud589"]}),"\n",(0,h.jsx)(n.p,{children:"[bash]"}),"\n",(0,h.jsx)(n.p,{children:"ceph-deploy osd activate ceph-node01:/var/local/osd0 ceph-node02:/var/local/osd1"}),"\n",(0,h.jsx)(n.p,{children:"[/bash]"}),"\n",(0,h.jsx)(n.p,{children:"\xa0"}),"\n",(0,h.jsx)(n.h4,{id:"12-node-\uc124\uc815-\ubc0f-keyring-\ud30c\uc77c-\ubcf5\uc0ac",children:"12. Node \uc124\uc815 \ubc0f keyring \ud30c\uc77c \ubcf5\uc0ac"}),"\n",(0,h.jsx)(n.p,{children:"ceph-admin\uc5d0\uc11c \uc544\ub798\uc758 command\ub97c \uc2e4\ud589\ud558\uba74 \uac01 \uc124\uc815 \ubc0f keyring \ub4f1 \ud544\uc694\ud55c \ud30c\uc77c\uc774 /etc/ceph \uacbd\ub85c\uc5d0 \ubcf5\uc0ac\ub418\ub294\ub370 \uadf8 \ud6c4\uc5d0 keyring \ud30c\uc77c\uc758 \uc77d\uae30 \uad8c\ud55c\uc744 \ucd94\uac00\ud574\uc918\uc57c \ud55c\ub2e4."}),"\n",(0,h.jsx)(n.p,{children:"[bash]"}),"\n",(0,h.jsx)(n.p,{children:"ceph-deploy admin ceph-admin ceph-node01 ceph-node02"}),"\n",(0,h.jsx)(n.p,{children:"sudo chmod +r /etc/ceph/ceph.client.admin.keyring"}),"\n",(0,h.jsx)(n.p,{children:"[/bash]"}),"\n",(0,h.jsx)(n.p,{children:"\xa0"}),"\n",(0,h.jsx)(n.h4,{id:"13-health-check",children:"13. Health check"}),"\n",(0,h.jsx)(n.p,{children:"\uae30\ubcf8 \uc124\uc815\uc740 \ub2e4 \uc644\ub8cc\ub41c \uac83\uc774\ubbc0\ub85c \uac01 node\uc640 osd\uac00 \uc815\uc0c1\uc778\uc9c0 ceph-admin\uc5d0\uc11c \ud655\uc778\ud574\ubcf8\ub2e4. HEALTH_OK\uac00 \ub098\uc624\uba74 \uc815\uc0c1."}),"\n",(0,h.jsx)(n.p,{children:"[bash]"}),"\n",(0,h.jsx)(n.p,{children:"ceph health"}),"\n",(0,h.jsx)(n.p,{children:"[/bash]"}),"\n",(0,h.jsx)(n.p,{children:"\xa0"}),"\n",(0,h.jsx)(n.h4,{id:"14-\uacb0\ub860",children:"14. \uacb0\ub860"}),"\n",(0,h.jsx)(n.p,{children:"ceph-deploy\ub97c \uc0ac\uc6a9\ud55c \uc124\uce58\ub294 \uba87\uac00\uc9c0 \ubb38\uc81c\uac00 \uc788\ub294 \uac83\uc73c\ub85c \ubcf4\uc774\uae30 \ub54c\ubb38\uc5d0 \uc774\ud6c4\uc5d0 manual\ub85c \uc124\uce58\ub97c \ub2e4\uc2dc \ud574\uc11c \uacfc\uc815\uc774\ub098 \uae30\ud0c0 \ub0b4\uc6a9\ub4e4\uc744 \uc880 \ub354 \uae4a\uac8c \uc0b4\ud3b4\ubcf8 \ud6c4\uc5d0 \uac00\ub2a5\ud55c \uc790\ub3d9\ud654\uae4c\uc9c0 \uc9c4\ud589\ud574\ubcf4\ub294\uac8c \uc88b\uc744 \uac83 \uac19\ub2e4. \ub610 \ud655\uc7a5\uc774 \uc6a9\uc774\ud55c\uc9c0 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc744 \ub54c \ubcf5\uad6c \uac19\uc740 \uac83\ub4e4\uc740 \uc5b4\ub5bb\uac8c \ud560 \uc218 \uc788\ub294\uc9c0 performance \uce21\uba74\uc5d0\uc11c \uc4f8\ub9cc\ud55c\uc9c0 \ub4f1\uc758 \ub0b4\uc6a9\ub3c4 \uac80\ud1a0\ud574\ubcfc \ud544\uc694\uac00 \uc788\uaca0\ub2e4."})]})}function t(e={}){const{wrapper:n}={...(0,p.R)(),...e.components};return n?(0,h.jsx)(n,{...e,children:(0,h.jsx)(i,{...e})}):i(e)}},89266:(e,n,s)=>{s.d(n,{A:()=>h});const h=s.p+"assets/images/ceph-chown-72aba04686ee0d58de057b1093e441df.png"},17892:(e,n,s)=>{s.d(n,{A:()=>h});const h=s.p+"assets/images/ceph-install-host-error-dacf6ff6641c0fd345e525d414d8e376.png"},23827:(e,n,s)=>{s.d(n,{A:()=>h});const h=s.p+"assets/images/ceph-osd-path-permission-1745d81cdf11d25461def983b39a397a.png"},71374:(e,n,s)=>{s.d(n,{A:()=>h});const h=s.p+"assets/images/ceph-osd-permission-error-2d0444ac99899063a56e23df1cd806f0.png"},28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>o});var h=s(96540);const p={},d=h.createContext(p);function c(e){const n=h.useContext(d);return h.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(p):e.components||p:c(e.components),h.createElement(d.Provider,{value:n},e.children)}}}]);