"use strict";(self.webpackChunkblurblah_github_io=self.webpackChunkblurblah_github_io||[]).push([[1587],{92120:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>r});var n=a(74848),l=a(28453);const i={title:"ELK + Packetbeat\ub85c \uc694\uccad\uc744 \uc9c0\ub3c4\uc5d0 \ud45c\uc2dc\ud558\uae30",date:"2018-04-23",categories:["devops"],tags:["ansible","ansible-playbook","ansible-role","elasticsearch","elk","geoip","geo_point","logstash","packetbeat","\uc790\ub3d9\ud654-\uad6c\uc131","\uc9c0\ub3c4"]},s=void 0,o={permalink:"/2018/04/23/wp/elk-packetbeat\ub85c-\uc694\uccad\uc744-\uc9c0\ub3c4\uc5d0-\ud45c\uc2dc\ud558\uae30",source:"@site/blog/wp/2018-04-23-elk-packetbeat\ub85c-\uc694\uccad\uc744-\uc9c0\ub3c4\uc5d0-\ud45c\uc2dc\ud558\uae30.md",title:"ELK + Packetbeat\ub85c \uc694\uccad\uc744 \uc9c0\ub3c4\uc5d0 \ud45c\uc2dc\ud558\uae30",description:"\uc11c\ube44\uc2a4\ub97c \uad6c\uc131\ud558\uba74\uc11c \uc0b4\ud3b4\ubcf4\ub2e4 \ubcf4\uba74 \uc5b4\ub5a4 \uc11c\ube44\uc2a4, \uc5b4\ub5a4 \ud398\uc774\uc9c0\uc5d0 request\uac00 \ub9ce\uc740\uc9c0 \uadf8 \uc694\uccad\ub4e4\uc740 \uc5b4\ub290 \uacf3\uc5d0\uc11c \ub9ce\uc774 \ubc1c\uc0dd\ud558\ub294\uc9c0 \uad81\uae08\ud560 \ub54c\uac00 \uc788\ub2e4. \uae00\ub85c\ubc8c\uc744 \ud0c0\uac9f\uc73c\ub85c \ud558\ub294 \uc11c\ube44\uc2a4\uc778 \uacbd\uc6b0 \ud2b9\ud788 \uadf8\ub7f4 \uac83\uc774\uace0 \ud639\uc740 \uc758\ub3c4\uce58 \uc54a\uc740 \uacf3\uc5d0\uc11c \uc774\uc0c1\ud55c \ud615\ud0dc\uc758 \uc694\uccad\uc774 \ube48\ubc88\ud560 \uacbd\uc6b0 \ucc28\ub2e8\ud560\uc9c0 \ud310\ub2e8\ud558\uae30 \uc704\ud574 \ud544\uc694\ud560 \uc218\ub3c4 \uc788\ub2e4. Google Analytics \uac19\uc740 \uc11c\ube44\uc2a4\uc758 \uacbd\uc6b0 \uc774\ub7ec\ud55c \uc694\uad6c\uc0ac\ud56d\uc744 \uac04\ud3b8\ud55c \ubc29\ubc95\uc73c\ub85c \uc5b4\ub290\uc815\ub3c4 \ud574\uc18c\ud560 \uc218 \uc788\uc9c0\ub9cc \uc5b4\ucc28\ud53c \uc5ec\ub7ec\uac00\uc9c0 \ubd84\uc11d \uc6a9\ub3c4\ub85c ELK\ub97c \uc0ac\uc6a9\ud558\uace0 \uc788\uc73c\ub2c8 packetbeat\ub97c \uc774\uc6a9\ud574\ubcf4\uae30\ub85c \ud588\ub2e4.",date:"2018-04-23T00:00:00.000Z",formattedDate:"April 23, 2018",tags:[{label:"ansible",permalink:"/tags/ansible"},{label:"ansible-playbook",permalink:"/tags/ansible-playbook"},{label:"ansible-role",permalink:"/tags/ansible-role"},{label:"elasticsearch",permalink:"/tags/elasticsearch"},{label:"elk",permalink:"/tags/elk"},{label:"geoip",permalink:"/tags/geoip"},{label:"geo_point",permalink:"/tags/geo-point"},{label:"logstash",permalink:"/tags/logstash"},{label:"packetbeat",permalink:"/tags/packetbeat"},{label:"\uc790\ub3d9\ud654-\uad6c\uc131",permalink:"/tags/\uc790\ub3d9\ud654-\uad6c\uc131"},{label:"\uc9c0\ub3c4",permalink:"/tags/\uc9c0\ub3c4"}],readingTime:8.72,hasTruncateMarker:!1,authors:[],frontMatter:{title:"ELK + Packetbeat\ub85c \uc694\uccad\uc744 \uc9c0\ub3c4\uc5d0 \ud45c\uc2dc\ud558\uae30",date:"2018-04-23",categories:["devops"],tags:["ansible","ansible-playbook","ansible-role","elasticsearch","elk","geoip","geo_point","logstash","packetbeat","\uc790\ub3d9\ud654-\uad6c\uc131","\uc9c0\ub3c4"]},unlisted:!1,prevItem:{title:"ELK\uc5d0\uc11c Docker log \uc218\uc9d1\ud558\uae30",permalink:"/2018/05/08/wp/elk\uc5d0\uc11c-docker-log-\uc218\uc9d1\ud558\uae30"},nextItem:{title:"Dynamic routing\uc744 \uc704\ud55c Zuul\uacfc Spring cloud config",permalink:"/2018/03/29/wp/dynamic-routing\uc744-\uc704\ud55c-zuul\uacfc-spring-cloud-config"}},p={authorsImageUrls:[]},r=[{value:"Packetbeat?",id:"packetbeat",level:3},{value:"\ud14c\uc2a4\ud2b8\uc6a9 ELK \uad6c\uc131",id:"\ud14c\uc2a4\ud2b8\uc6a9-elk-\uad6c\uc131",level:3},{value:"1. Roles",id:"1-roles",level:4},{value:"2. Playbook",id:"2-playbook",level:4},{value:"Packetbeat \uad6c\uc131",id:"packetbeat-\uad6c\uc131",level:3},{value:"Geoip filter",id:"geoip-filter",level:3},{value:"Geoip field \uc778\uc2dd \ubb38\uc81c",id:"geoip-field-\uc778\uc2dd-\ubb38\uc81c",level:3},{value:"geo_point type",id:"geo_point-type",level:3},{value:"\uc774\uc81c \uc9c0\ub3c4\ub97c \uadf8\ub9ac\uc790",id:"\uc774\uc81c-\uc9c0\ub3c4\ub97c-\uadf8\ub9ac\uc790",level:3}];function c(e){const t={a:"a",code:"code",h3:"h3",h4:"h4",img:"img",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:"\uc11c\ube44\uc2a4\ub97c \uad6c\uc131\ud558\uba74\uc11c \uc0b4\ud3b4\ubcf4\ub2e4 \ubcf4\uba74 \uc5b4\ub5a4 \uc11c\ube44\uc2a4, \uc5b4\ub5a4 \ud398\uc774\uc9c0\uc5d0 request\uac00 \ub9ce\uc740\uc9c0 \uadf8 \uc694\uccad\ub4e4\uc740 \uc5b4\ub290 \uacf3\uc5d0\uc11c \ub9ce\uc774 \ubc1c\uc0dd\ud558\ub294\uc9c0 \uad81\uae08\ud560 \ub54c\uac00 \uc788\ub2e4. \uae00\ub85c\ubc8c\uc744 \ud0c0\uac9f\uc73c\ub85c \ud558\ub294 \uc11c\ube44\uc2a4\uc778 \uacbd\uc6b0 \ud2b9\ud788 \uadf8\ub7f4 \uac83\uc774\uace0 \ud639\uc740 \uc758\ub3c4\uce58 \uc54a\uc740 \uacf3\uc5d0\uc11c \uc774\uc0c1\ud55c \ud615\ud0dc\uc758 \uc694\uccad\uc774 \ube48\ubc88\ud560 \uacbd\uc6b0 \ucc28\ub2e8\ud560\uc9c0 \ud310\ub2e8\ud558\uae30 \uc704\ud574 \ud544\uc694\ud560 \uc218\ub3c4 \uc788\ub2e4. Google Analytics \uac19\uc740 \uc11c\ube44\uc2a4\uc758 \uacbd\uc6b0 \uc774\ub7ec\ud55c \uc694\uad6c\uc0ac\ud56d\uc744 \uac04\ud3b8\ud55c \ubc29\ubc95\uc73c\ub85c \uc5b4\ub290\uc815\ub3c4 \ud574\uc18c\ud560 \uc218 \uc788\uc9c0\ub9cc \uc5b4\ucc28\ud53c \uc5ec\ub7ec\uac00\uc9c0 \ubd84\uc11d \uc6a9\ub3c4\ub85c ELK\ub97c \uc0ac\uc6a9\ud558\uace0 \uc788\uc73c\ub2c8 packetbeat\ub97c \uc774\uc6a9\ud574\ubcf4\uae30\ub85c \ud588\ub2e4."}),"\n",(0,n.jsx)(t.h3,{id:"packetbeat",children:"Packetbeat?"}),"\n",(0,n.jsx)(t.p,{children:"ELK stack\uc5d0\uc11c \ub85c\uadf8 \uc218\uc9d1\uc6a9\uc73c\ub85c filebeat\ub97c \ub9ce\uc774 \uc0ac\uc6a9\ud558\ub294\ub370 filebeat\ub294 \ud2b9\uc815 \ub85c\uadf8\ud30c\uc77c\uc744 \uc218\uc9d1\ud574\uc11c logstash\ub098 elasticsearch \ub4f1\uc73c\ub85c \uc804\uc1a1\ud558\ub294 \uc5ed\ud560\uc744 \uc218\ud589\ud55c\ub2e4. Packetbeat\ub294 \ub85c\uadf8\ud30c\uc77c \ub300\uc2e0 network packet \ub370\uc774\ud130\ub97c \uc218\uc9d1\ud574\uc11c \uc804\uc1a1\ud560 \uc218 \uc788\uc73c\uba70, \uac01\uc885 \ud504\ub85c\ud1a0\ucf5c \ubcc4\ub85c \ub370\uc774\ud130\ub97c \ubd84\ub958\ud574\uc11c \uc218\uc9d1\ud560 \uc218 \uc788\uac8c \ub418\uc5b4\uc788\ub2e4."}),"\n",(0,n.jsx)(t.h3,{id:"\ud14c\uc2a4\ud2b8\uc6a9-elk-\uad6c\uc131",children:"\ud14c\uc2a4\ud2b8\uc6a9 ELK \uad6c\uc131"}),"\n",(0,n.jsx)(t.p,{children:"\uc6b0\uc120 packetbeat\ub97c \uc0ac\uc6a9\ud574\uc11c \uc5b4\ub290 \uc9c0\uc5ed\uc5d0\uc11c \uc694\uccad\uc774 \ub4e4\uc5b4\uc624\ub294\uc9c0\ub97c \ubcf4\uace0 \uc2f6\uc740 \uac8c 1\ucc28 \ubaa9\ud45c\uc600\ub294\ub370 \uc2e4\uc81c \uc6b4\uc601\uc911\uc778 ELK\ub97c \uac74\ub4dc\ub9ac\uace0 \uc2f6\uc9c0\ub294 \uc54a\uc544\uc11c \uc0c8\ub85c\uc6b4 VM\uc5d0 Ansible\ub85c \ub2e4\uc2dc \uad6c\uc131\ud588\ub2e4. \ubbf8\ub9ac \ub9cc\ub4e4\uc5b4\ub454 5\uac1c\uc758 role\uc744 clone\ud574\uc11c \uc544\ub798\uc640 \ube44\uc2b7\ud55c \ud615\ud0dc\ub85c playbook\uc744 \ub9cc\ub4e4\uace0 \uc2e4\ud589\ud558\uba74 \ub41c\ub2e4. ELK\uac00 \ub3d9\uc2dc\uc5d0 \uc5ec\ub7ec \uc885\ub958\uc758 beat\uc5d0\uc11c \uc804\ub2ec\ub418\ub294 \ub370\uc774\ud130\ub97c \ubc1b\uc544\uc57c\ud558\ub2c8 \ub2e4\ub978 \ubb38\uc81c\uac00 \uc788\ub294\uc9c0\ub97c \ubcf4\uae30 \uc704\ud574 filebeat\ub3c4 \uac19\uc774 \uad6c\uc131\ud588\ub2e4."}),"\n",(0,n.jsx)(t.h4,{id:"1-roles",children:"1. Roles"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://github.com/blurblah/ansible-role-elasticsearch",children:"https://github.com/blurblah/ansible-role-elasticsearch"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://github.com/blurblah/ansible-role-logstash",children:"https://github.com/blurblah/ansible-role-logstash"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://github.com/blurblah/ansible-role-kibana",children:"https://github.com/blurblah/ansible-role-kibana"})}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"https://github.com/blurblah/ansible-role-docker",children:"https://github.com/blurblah/ansible-role-docker"})," (Dependency)"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://github.com/blurblah/ansible-role-filebeat",children:"https://github.com/blurblah/ansible-role-filebeat"})}),"\n",(0,n.jsx)(t.h4,{id:"2-playbook",children:"2. Playbook"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"- hosts: elk_test\n  become: yes\n  roles:\n    - role: elasticsearch\n      cluster:\n        name: test-es\n    - role: logstash\n      logstash_loglevel: debug\n    - role: kibana\n      server_name: test-kibana\n\n- hosts: elk_test\n  become: yes\n  roles:\n    - role: filebeat\n      logstash_host: '{{ ansible_default_ipv4.address }}'\n      logstash_port: 5044\n      enable_kibana_dashboard: true\n      kibana_host: '{{ ansible_default_ipv4.address }}'\n      kibana_port: 5601\n      prospectors:\n        - { type: syslog, files: ['/var/log/auth.log'] }\n"})}),"\n",(0,n.jsx)(t.h3,{id:"packetbeat-\uad6c\uc131",children:"Packetbeat \uad6c\uc131"}),"\n",(0,n.jsxs)(t.p,{children:["Packetbeat\ub3c4 \uc5ed\uc2dc Ansible role\ub85c \ub9cc\ub4e4\uc5b4\uc11c ELK \uad6c\uc131\uacfc \ube44\uc2b7\ud55c \ud615\ud0dc\ub85c \uac04\ub2e8\ud788 \uc644\ub8cc. Role\uc740 ",(0,n.jsx)(t.a,{href:"https://github.com/blurblah/ansible-role-packetbeat",children:"github"}),"\uc5d0\uc11c \uac00\uc838\uc624\uba74 \ub418\uace0 \uc694\uccad\uc744 \ubd84\uc11d\ud558\uace0 \uc2f6\uc740 \uc11c\ubc84\ub97c \ub300\uc0c1\uc73c\ub85c \uc544\ub798\uc640 \uac19\uc740 \ud615\ud0dc\ub85c playbook\uc744 \ub9cc\ub4e4\uc5b4\uc11c \uc2e4\ud589\ud588\ub2e4."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"- hosts: test_proxy\n  become: yes\n  roles:\n    - role: packetbeat\n      packetbeat_name: test_packetbeat\n      packetbeat_protocols:\n        - { type: tls, ports: [443] }\n      packetbeat_loglevel: debug\n      out_logstash:\n        host: '{{ hostvars[\"elk_test\"].ansible_host }}'\n        port: 5044\n"})}),"\n",(0,n.jsx)(t.p,{children:"\ub0b4\uac00 \ubd84\uc11d\ud558\uace0\uc790 \ud588\ub358 \uc11c\ubc84\ub294 nginx\ub85c \ub418\uc5b4\uc788\ub294 reverse proxy \uc600\ub294\ub370 \uc778\uc99d\uc11c\uac00 \uc801\uc6a9\ub418\uc5b4 \uc788\uc5c8\uae30 \ub54c\ubb38\uc5d0 type\uc744 tls\ub85c port\ub294 443 \ud558\ub098\ub9cc \ub123\uc5b4\uc11c \uc9c0\uc815\ud588\ub2e4."}),"\n",(0,n.jsx)(t.h3,{id:"geoip-filter",children:"Geoip filter"}),"\n",(0,n.jsx)(t.p,{children:"Packetbeat \uae4c\uc9c0 \uad6c\uc131\ud574\uc11c \ub370\uc774\ud130\uac00 \uc218\uc9d1\ub418\ub294 \uac83\uc744 \ud655\uc778\ud574\ubcf4\uba74 (Kibana\uc5d0\uc11c index pattern \uc0dd\uc131\uae4c\uc9c0 \ud55c \uacbd\uc6b0) \uc694\uccad ip, url, protocol \ub4f1\uc740 \ud45c\uc2dc\ub418\uc9c0\ub9cc \uc704\uce58 \uc815\ubcf4\uc5d0 \ub300\ud55c \ub0b4\uc6a9\uc740 \uc5c6\ub2e4. Logstash\uc758 geoip filter\ub294 \uc218\uc9d1\ub41c \uc815\ubcf4 \uc911 ip\uc640 \ub0b4\ubd80 DB\uc5d0 \ub9e4\ud551\ub41c \uc815\ubcf4\ub97c \uac00\uc9c0\uace0 geoip\ub77c\ub294 field\ub97c \uc0dd\uc131\ud574\uc8fc\ub294 \uc5ed\ud560\uc744 \uc218\ud589\ud55c\ub2e4\uace0 \ud574\uc11c \uc544\ub798\ucc98\ub7fc logstash pipeline \uacbd\ub85c\uc5d0 filter\ub97c \uc124\uc815\ud574\uc8fc\uc5c8\ub2e4."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'filter {\n  if [@metadata][beat] == "packetbeat" and [client_ip] and [client_ip] !~ /^10\\./ {\n    geoip {\n      source => "client_ip"\n    }\n  }\n}\n'})}),"\n",(0,n.jsx)(t.p,{children:"Filebeat \ub4f1 \ub2e4\ub978 beat\ub4e4\uc740 geoip filter\ub97c \uc801\uc6a9\ud558\uc9c0 \uc54a\uc744 \uac83\uc774\uae30 \ub54c\ubb38\uc5d0 metadata\ub97c \uc774\uc6a9\ud574 \uac70\ub974\uac8c \ud588\ub2e4. Private ip\uc758 \uacbd\uc6b0 \uc704\uce58 \uc815\ubcf4\uc5d0 \ub300\ud574\uc11c \ub9e4\ud551\ub41c \uc815\ubcf4\uac00 \uc5c6\uae30 (\uc54c \uc218\ub3c4 \uc5c6\uace0) \ub54c\ubb38\uc5d0 \ub0b4 \ud658\uacbd\uc5d0\uc11c \uc694\uccad\uc774 \ubc1c\uc0dd\ud558\ub294 10.0.0.0/16 \ub300\uc5ed\uc5d0 \ub300\ud574\uc11c\ub3c4 \uc801\uc6a9\ud558\uc9c0 \uc54a\uae30\ub85c \ud588\ub2e4. Private ip\uc5d0 \ub300\ud574\uc11c \ucc98\ub9ac\ub97c \ud558\uac8c \ub418\uba74 \uc544\ub798\uc640 \uac19\uc740 \uc624\ub958\uac00 \ubc1c\uc0dd\ud55c\ub2e4."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"[2018-04-18T04:52:51,124][DEBUG][logstash.filters.geoip   ] IP 10.x.x.x was not found in the database {:event=>#<LogStash::Event:0x65726e3c>}\n"})}),"\n",(0,n.jsx)(t.p,{children:"Filter \uc124\uc815\uc740 \uc880 \ub354 \uc0b4\ud3b4\ubcf4\uace0 \ub354 \ud6a8\uc728\uc801\uc73c\ub85c \uc218\uc815\ud560 \ud544\uc694\ub294 \uc788\uc744 \uac83 \uac19\ub2e4."}),"\n",(0,n.jsx)(t.h3,{id:"geoip-field-\uc778\uc2dd-\ubb38\uc81c",children:"Geoip field \uc778\uc2dd \ubb38\uc81c"}),"\n",(0,n.jsx)(t.p,{children:"Filter \uc124\uc815 \ud6c4 logstash\ub97c restart \ud558\uace0 \ub098\uc11c kibana \ucabd\uc5d0\uc11c \uc0b4\ud3b4\ubcf4\ub2c8 \uc5c6\ub358 geoip field \ub4e4\uc774 \uc0c8\ub85c \ub9cc\ub4e4\uc5b4\uc9c0\ub294\uac74 \ud655\uc778\uc774 \ub418\ub294\ub370 \uc544\ub798 \uadf8\ub9bc\ucc98\ub7fc warning\uc774 \ubc1c\uc0dd\ud558\ub294 \uac78 \ubcfc \uc218 \uc788\uc5c8\ub2e4."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"http://13.125.231.217/wp-content/uploads/2018/04/packetbeat-geoip-warning.png",children:(0,n.jsx)(t.img,{src:a(50874).A+"",width:"770",height:"364"})})}),"\n",(0,n.jsx)(t.p,{children:"\uc774\uc804\uc5d0 \ub370\uc774\ud130 \ub4e4\uc5b4\uc624\ub294\uac78 \ubcf4\uaca0\ub2e4\uace0 index pattern\uc744 \uc0dd\uc131\ud588\ub294\ub370 \uadf8 \uc2dc\uc810\uc758 index\uc5d0\ub294 \uc5c6\ub358 field \ub4e4\uc774\uae30 \ub54c\ubb38\uc5d0 warning\uc774 \ubc1c\uc0dd\ud558\ub294 \uac83\uc774\ub77c\uc11c index pattern\uc744 \uc81c\uac70\ud558\uace0 \ub2e4\uc2dc \uc0dd\uc131\ud574\uc8fc\ub294 \uac78\ub85c \ubb38\uc81c\ub97c \ud574\uacb0"}),"\n",(0,n.jsx)(t.h3,{id:"geo_point-type",children:"geo_point type"}),"\n",(0,n.jsx)(t.p,{children:"Warning\uc774 \uc5c6\uc5b4\uc84c\uc73c\ub2c8 kibana\uc758 visualize \uba54\ub274\uc5d0 \uac00\uc11c map\uc744 \ucd94\uac00\ud574 \uadf8\ub824\ubcfc\uae4c \ud558\uace0 \uc124\uc815\uc744 \ud574\ubcf4\ub2c8 \uc544\ub798\uc640 \uac19\uc740 \uc624\ub958\uac00 \ub728\uba74\uc11c \uadf8\ub824\uc9c0\uc9c8 \uc54a\ub294\ub2e4."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"http://13.125.231.217/wp-content/uploads/2018/04/packetbeat-map-invalid-fieldtype.png",children:(0,n.jsx)(t.img,{src:a(29026).A+"",width:"326",height:"528"})})}),"\n",(0,n.jsx)(t.p,{children:"\ubb34\uc5c7\uc774 \ubb38\uc81c\uc778\uac00 \uc2f6\uc5b4\uc11c index pattern\uc5d0\uc11c field\ub4e4\uc758 type\uc744 \uc0b4\ud3b4\ubcf4\ub2c8 geo_point type\uc73c\ub85c \ub41c field\uac00 \ubcf4\uc774\uc9c8 \uc54a\ub294\ub2e4. \uc774\ub7f0 \ubd80\ubd84\uc740 \uc880 \uac1c\uc120\uc774 \ud544\uc694\ud574 \ubcf4\uc774\ub294\ub370 field \ub4e4\uc774 filter\uc5d0 \uc758\ud574 \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131\ub418\ub294 \uac83\uc774\ub77c \uc54c\uc544\uc11c \ucc98\ub9ac\ub418\uba74 \ud3b8\ud560 \uac83 \uac19\ub2e4."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"http://13.125.231.217/wp-content/uploads/2018/04/packetbeat-fields.png",children:(0,n.jsx)(t.img,{src:a(58618).A+"",width:"640",height:"689"})})}),"\n",(0,n.jsx)(t.p,{children:"\uc774\ub7f0 \uacbd\uc6b0 elasticsearch\uc5d0\uc11c \uc0dd\uc131\ud558\ub294 index\uc5d0 \ub300\ud55c \ubcc0\uacbd\uc774 \ud544\uc694\ud55c\ub370 \uc774\ubbf8 \uc874\uc7ac\ud558\ub294 index\ub97c \uc77c\uad04 \ubcc0\uacbd\ud558\ub294 \ubc29\ubc95\ub3c4 \uc788\uc744 \uac83 \uac19\uace0 \uc0c8\ub85c \uc0dd\uc131\ub418\ub294 index\uc5d0 \ub300\ud574\uc11c \uc801\uc6a9\ud560 template\uc744 \ucd94\uac00\ud558\ub294 \ubc29\ubc95\ub3c4 \uc788\uc744 \uc218 \uc788\ub2e4. \ub098\uc758 \uacbd\uc6b0\uc5d4 \uc774\ubbf8 \ub9cc\ub4e4\uc5b4\uc9c4 index\uc640 \ub370\uc774\ud130\uac00 \uac70\uc758 \uc5c6\ub294 \uc0c1\ud0dc\uc774\uae30 \ub54c\ubb38\uc5d0 \uc874\uc7ac\ud558\ub294 index\ub294 \ubaa8\ub450 \uc81c\uac70\ud558\uace0 template\uc744 \ucd94\uac00\ud574\uc11c \uc774\ud6c4 \uc0dd\uc131\ub418\ub294 index\uc5d0 \ub300\ud574\uc11c\ub9cc field type\uc774 \ubcc0\uacbd\ub418\ub3c4\ub85d \ud588\ub2e4. Template\uc744 \uc801\uc6a9\ud558\uae30 \uc704\ud574\uc11c\ub294 \uc544\ub798\uc640 \uac19\uc740 json \ud30c\uc77c\uc744 \uc0dd\uc131\ud574\uc11c elasticsearch\uc5d0 \ubc00\uc5b4\ub123\uc5b4\uc57c \ud55c\ub2e4. (\uc774\uc804\uc5d0 index, index pattern \uc81c\uac70\ud558\uace0 \uc9c4\ud589\ud568)"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'{\n  "template": "packetbeat-*",\n  "mappings": {\n    "_default_": {\n      "properties": {\n        "geoip": {\n          "properties": {\n            "location": {"type": "geo_point"}\n          }\n        }\n      }\n    }\n  }\n}\n'})}),"\n",(0,n.jsx)(t.p,{children:"Json \uc0dd\uc131 \ud6c4 elasticsearch\uc5d0\uac8c \ubcf4\ub0b4\uc8fc\uc790."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'curl -XPUT -H "Content-Type: application/json" localhost:9200/_template/packetbeat_geoip -d@packetbeat_geoip.json\n'})}),"\n",(0,n.jsx)(t.p,{children:"\ub2e4\uc2dc packetbeat \ub85c\ubd80\ud130 \ub370\uc774\ud130\uac00 \ub4e4\uc5b4\uc624\uae30 \uc2dc\uc791\ud558\uba74 template\uc774 \uc801\uc6a9\ub41c index\uac00 \uc0dd\uc131\ub418\uace0 kibana\uc5d0\uc11c index pattern\uc744 \ub2e4\uc2dc \uc0dd\uc131\ud574 \ud655\uc778\ud574\ubcf4\uba74 \uc544\ub798\ucc98\ub7fc geoip.location field\uac00 geo_point type\uc73c\ub85c \ub418\uc5b4\uc788\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"http://13.125.231.217/wp-content/uploads/2018/04/packetbeat-geopoint.png",children:(0,n.jsx)(t.img,{src:a(83654).A+"",width:"443",height:"98"})})}),"\n",(0,n.jsx)(t.h3,{id:"\uc774\uc81c-\uc9c0\ub3c4\ub97c-\uadf8\ub9ac\uc790",children:"\uc774\uc81c \uc9c0\ub3c4\ub97c \uadf8\ub9ac\uc790"}),"\n",(0,n.jsx)(t.p,{children:"\uc624\ub958\uac00 \ubc1c\uc0dd\ud558\ub358 \ubd80\ubd84\uc744 \ud574\uacb0\ud588\uc73c\ub2c8 \ub2e4\uc2dc visualize \uba54\ub274\uc5d0\uc11c \uc9c0\ub3c4\ub97c \ucd94\uac00\ud574 \uc124\uc815\ud558\uba74 \uc544\ub798\ucc98\ub7fc \uc694\uccad \ud69f\uc218\uc5d0 \ub530\ub77c \uc0c9\uae54\ubcc4\ub85c \ud45c\uc2dc\ub418\ub294 \uac78 \ubcfc \uc218 \uc788\ub2e4."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"http://13.125.231.217/wp-content/uploads/2018/04/packetbeat-map-kor.png",children:(0,n.jsx)(t.img,{src:a(99932).A+"",width:"1024",height:"569"})})}),"\n",(0,n.jsx)(t.p,{children:"VPN\uc5d0 \uc5f0\uacb0\ud574\uc11c \ub2e4\ub978 \ub098\ub77c\ub85c\ubd80\ud130\uc758 \uc694\uccad\ub3c4 \uc81c\ub300\ub85c \ud45c\uc2dc\ub418\ub294\uc9c0 \ud655\uc778\ud574\ubcf4\ub2c8 \ubcc4 \ubb38\uc81c\uc5c6\uc774 \ub41c\ub2e4."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"http://13.125.231.217/wp-content/uploads/2018/04/packetbeat-map-us.png",children:(0,n.jsx)(t.img,{src:a(40001).A+"",width:"1024",height:"566"})})}),"\n",(0,n.jsx)(t.p,{children:"\xa0"}),"\n",(0,n.jsx)(t.p,{children:"Packetbeat\ub85c\ubd80\ud130 \ub4e4\uc5b4\uc624\ub294 \ub370\uc774\ud130\ub4e4\uc744 \uac04\ub2e8\ud788 \uc0b4\ud3b4\ubcf4\ub2c8 \uc0ac\uc2e4 \uc9c0\uc5ed\uc5d0 \ub300\ud55c \uc815\ubcf4 \uc774\uc678\uc5d0\ub3c4 \uc4f8\ub9cc\ud55c \ub0b4\uc6a9\ub4e4\uc774 \ub9ce\ub2e4. \uc694\uccad url \ubcc4\ub85c \ubd84\uc11d\ud560 \ub54c\ub3c4 \uc720\uc6a9\ud560 \uac83 \uac19\uace0 protocol type (service) \ubcc4\ub85c \uad6c\ubd84\ud574\uc11c \ud655\uc778\ud558\ub294 \uac83\ub3c4 \uc27d\uac8c \uac00\ub2a5\ud560 \uac83 \uac19\ub2e4. \uadf8\ub7ec\ub098 \uc774\ub7f0 \ub3c4\uad6c\ub4e4\ub85c \ubd84\uc11d\ud560\ub9cc\ud55c \uc11c\ube44\uc2a4\ub97c \ub9cc\ub4e4\uc5b4\ub0b4\ub294 \uac74 \uc5b4\ub824\uc6b4 \ubb38\uc81c :)"})]})}function h(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},58618:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/packetbeat-fields-efaae611930a20ccdcf7c05da13994db.png"},50874:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/packetbeat-geoip-warning-24318b8bb9e059e53fa4d3f18973237b.png"},83654:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/packetbeat-geopoint-e0f248a9c375a864a97f41744eec282e.png"},29026:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/packetbeat-map-invalid-fieldtype-c06ac3205d9500520b4293b900f39697.png"},99932:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/packetbeat-map-kor-1024x569-2daa08cc258f144a17ca337e7850eaf1.png"},40001:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/packetbeat-map-us-1024x566-224c853de258fa31f047157e4aa68fb1.png"},28453:(e,t,a)=>{a.d(t,{R:()=>s,x:()=>o});var n=a(96540);const l={},i=n.createContext(l);function s(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);