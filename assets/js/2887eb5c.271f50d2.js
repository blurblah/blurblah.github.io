"use strict";(self.webpackChunkblurblah_github_io=self.webpackChunkblurblah_github_io||[]).push([[36207],{93462:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>r,default:()=>l,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var a=n(74848),s=n(28453);const o={title:"MAAS\uc5d0 juju bootstrap\uc744 \ud574\ubcf4\uc790",date:"2016-11-05",categories:["devops"],tags:["boostrap","juju","maas","maas-juju-\uc5f0\uacb0","no-auto-upgrade","waiting-for-api-to-become-available"],coverImage:"juju-bootstrap.png"},r=void 0,i={permalink:"/2016/11/05/wp/maas\uc5d0-juju-bootstrap\uc744-\ud574\ubcf4\uc790",source:"@site/blog/wp/2016-11-05-maas\uc5d0-juju-bootstrap\uc744-\ud574\ubcf4\uc790.md",title:"MAAS\uc5d0 juju bootstrap\uc744 \ud574\ubcf4\uc790",description:"MAAS \uad6c\ucd95\ud558\uae30\ub97c \ud1b5\ud574 \ub9cc\ub4e4\uc5b4\uc9c4 node \ub4e4\uc744 \uc0ac\uc6a9\uc790\ub4e4\uc774 acquire \ud574\uc11c \uac01\uc790\uc758 \uc6a9\ub3c4\uc5d0 \ub9de\uac8c \uc0ac\uc6a9\ud560 \uc218\ub3c4 \uc788\uc9c0\ub9cc juju\ub97c \uc774\uc6a9\ud558\uba74 \uc790\ub3d9 \ubc30\ud3ec \ubc0f \uad00\ub9ac\ub3c4 \uac00\ub2a5\ud558\ub2e4. MAAS\ub97c \uc0ac\uc6a9\ud558\uac8c \ub41c \uc774\uc720 \uc911 \ud558\ub098\uac00 ceph\uc744 \ub354 \uc0b4\ud3b4\ubcf4\uae30 \uc704\ud574\uc11c\uc778\ub370 (Juju\ub85c Ceph\uc744 deploy \ud574\ubcf4\uc790 \ucc38\uc870) \uc5b4\ucc0c\ubcf4\uba74 \ubc30\ubcf4\ub2e4 \ubc30\uaf3d\uc774 \ub354 \ud070 \uacbd\uc6b0\uc77c \uc218\ub3c4 \uc788\uaca0\uc9c0\ub9cc \uc5b4\ub514\uae4c\uc9c0\ub098 \uc7ac\ubbf8\ub85c \ud639\uc740 \uacf5\ubd80\ud55c\ub2e4 \uc0dd\uac01\ud558\ub2c8 \ud6a8\uc728\uc801\uc774\uc9c0 \ubabb\ud574\ub3c4 \uad1c\ucc2e\ub2e4\uace0 \ubcf8\ub2e4.",date:"2016-11-05T00:00:00.000Z",formattedDate:"November 5, 2016",tags:[{label:"boostrap",permalink:"/tags/boostrap"},{label:"juju",permalink:"/tags/juju"},{label:"maas",permalink:"/tags/maas"},{label:"maas-juju-\uc5f0\uacb0",permalink:"/tags/maas-juju-\uc5f0\uacb0"},{label:"no-auto-upgrade",permalink:"/tags/no-auto-upgrade"},{label:"waiting-for-api-to-become-available",permalink:"/tags/waiting-for-api-to-become-available"}],readingTime:5.76,hasTruncateMarker:!1,authors:[],frontMatter:{title:"MAAS\uc5d0 juju bootstrap\uc744 \ud574\ubcf4\uc790",date:"2016-11-05",categories:["devops"],tags:["boostrap","juju","maas","maas-juju-\uc5f0\uacb0","no-auto-upgrade","waiting-for-api-to-become-available"],coverImage:"juju-bootstrap.png"},unlisted:!1,prevItem:{title:"Mesos \uae30\ubc18\uc5d0\uc11c\uc758 Docker \ubd80\ud558 \ud14c\uc2a4\ud2b8\uc640 \ubaa8\ub2c8\ud130\ub9c1",permalink:"/2016/11/18/wp/mesos-\uae30\ubc18\uc5d0\uc11c\uc758-docker-\ubd80\ud558-\ud14c\uc2a4\ud2b8\uc640-\ubaa8\ub2c8\ud130\ub9c1"},nextItem:{title:"VPN\uc73c\ub85c MAAS node\uc5d0 \uc811\uadfc\ud558\uae30 \uc704\ud55c route \uc124\uc815",permalink:"/2016/11/04/wp/vpn\uc73c\ub85c-maas-node\uc5d0-\uc811\uadfc\ud558\uae30-\uc704\ud55c-route-\uc124\uc815"}},u={authorsImageUrls:[]},p=[{value:"1. Prerequisites",id:"1-prerequisites",level:3},{value:"2. environments.yaml \ud30c\uc77c \uc218\uc815",id:"2-environmentsyaml-\ud30c\uc77c-\uc218\uc815",level:3},{value:"3. Bootstrap with no-auto-upgrade option",id:"3-bootstrap-with-no-auto-upgrade-option",level:3}];function j(e){const t={a:"a",h3:"h3",img:"img",p:"p",strong:"strong",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.a,{href:"http://13.125.231.217/1405",children:"MAAS \uad6c\ucd95\ud558\uae30"}),"\ub97c \ud1b5\ud574 \ub9cc\ub4e4\uc5b4\uc9c4 node \ub4e4\uc744 \uc0ac\uc6a9\uc790\ub4e4\uc774 acquire \ud574\uc11c \uac01\uc790\uc758 \uc6a9\ub3c4\uc5d0 \ub9de\uac8c \uc0ac\uc6a9\ud560 \uc218\ub3c4 \uc788\uc9c0\ub9cc juju\ub97c \uc774\uc6a9\ud558\uba74 \uc790\ub3d9 \ubc30\ud3ec \ubc0f \uad00\ub9ac\ub3c4 \uac00\ub2a5\ud558\ub2e4. MAAS\ub97c \uc0ac\uc6a9\ud558\uac8c \ub41c \uc774\uc720 \uc911 \ud558\ub098\uac00 ceph\uc744 \ub354 \uc0b4\ud3b4\ubcf4\uae30 \uc704\ud574\uc11c\uc778\ub370 (",(0,a.jsx)(t.a,{href:"http://13.125.231.217/1329",children:"Juju\ub85c Ceph\uc744 deploy \ud574\ubcf4\uc790"})," \ucc38\uc870) \uc5b4\ucc0c\ubcf4\uba74 \ubc30\ubcf4\ub2e4 \ubc30\uaf3d\uc774 \ub354 \ud070 \uacbd\uc6b0\uc77c \uc218\ub3c4 \uc788\uaca0\uc9c0\ub9cc \uc5b4\ub514\uae4c\uc9c0\ub098 \uc7ac\ubbf8\ub85c \ud639\uc740 \uacf5\ubd80\ud55c\ub2e4 \uc0dd\uac01\ud558\ub2c8 \ud6a8\uc728\uc801\uc774\uc9c0 \ubabb\ud574\ub3c4 \uad1c\ucc2e\ub2e4\uace0 \ubcf8\ub2e4."]}),"\n",(0,a.jsx)(t.p,{children:"\xa0"}),"\n",(0,a.jsx)(t.h3,{id:"1-prerequisites",children:"1. Prerequisites"}),"\n",(0,a.jsxs)(t.p,{children:["Juju\ub97c \uba3c\uc800 \uc124\uce58\ud574\uc57c \ud55c\ub2e4. (",(0,a.jsx)(t.a,{href:"https://jujucharms.com/docs/stable/getting-started",children:"getting-started \ubb38\uc11c"})," \ucc38\uc870) \ub098\uc758 \uacbd\uc6b0\uc5d4 \uc608\uc804\uc5d0 \uc124\uce58\ud574 \ub454 \uc0c1\ud0dc\ub77c 1.25.3 \ubc84\uc804\uc774 \uc124\uce58\ub418\uc5b4 \uc788\ub294\ub370 \ud604\uc7ac \ucd5c\uc2e0 \ubc84\uc804\uc740 2.0\uc774\uace0 \uac01 \ubc84\uc804\ubcc4\ub85c \uae30\ub2a5 \ucc28\uc774\uac00 \uc788\uc73c\ub2c8(\ubc84\uadf8\ub3c4...) \uc8fc\uc758\uac00 \ud544\uc694\ud558\ub2e4. MAAS\uc5d0 \uc811\uc18d\ud574\uc11c \uc0ac\uc804\uc5d0 MAAS key\ub97c \ubcf5\uc0ac\ud574 \ub450\uc5b4\uc57c \ud55c\ub2e4."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.a,{href:"http://13.125.231.217/wp-content/uploads/2016/11/maas-keys.png",children:(0,a.jsx)(t.img,{alt:"maas-keys",src:n(67559).A+"",width:"1552",height:"985"})})}),"\n",(0,a.jsx)(t.p,{children:"MAAS\uc5d0 \ub85c\uadf8\uc778 \ud6c4 \uacc4\uc815 \uc774\ub984\uc744 \ud074\ub9ad\ud574\uc11c Account \uba54\ub274\ub97c \uc120\ud0dd\ud558\uba74 \uc704 \uadf8\ub9bc\uacfc \uac19\uc740 \ud654\uba74\uc774 \ud45c\uc2dc\ub418\ub294\ub370 \uae30\ubcf8\uc73c\ub85c \uc0dd\uc131\ub418\uc5b4 \uc788\ub294 MAAS key\ub97c \ubcf5\uc0ac\ud574\ub454\ub2e4. \uc5c6\uc73c\uba74 \uc0dd\uc131. \ub610, \uc774\ubbf8 MAAS \uad6c\ucd95\ud560 \ub54c ssh key \ub4f1\ub85d\uc744 \ud574\ub1a8\uc9c0\ub9cc \uc548\ud574\ub450\uc5c8\ub2e4\uba74 \ubcf8\uc778\uc774 \uc0ac\uc6a9\ud558\ub294 host\uc758 ssh public key\ub97c \ub4f1\ub85d\ud574\ub454\ub2e4."}),"\n",(0,a.jsx)(t.p,{children:"\xa0"}),"\n",(0,a.jsx)(t.h3,{id:"2-environmentsyaml-\ud30c\uc77c-\uc218\uc815",children:"2. environments.yaml \ud30c\uc77c \uc218\uc815"}),"\n",(0,a.jsx)(t.p,{children:"Juju\ub97c \uc124\uce58\ud558\uba74 ~/.juju \uacbd\ub85c\uac00 \uba87\uac1c\uc758 \ud30c\uc77c\uacfc \ud568\uaed8 \uc790\ub3d9 \uc0dd\uc131\ub41c\ub2e4. \ub9cc\uc57d \uc5c6\ub2e4\uba74 juju init \uba85\ub839\uc744 \uc2e4\ud589\ud558\uba74 \uc0dd\uc131\ub41c\ub2e4. Juju\ub294 yaml\ub85c \uac01 \ud658\uacbd\uc5d0 \ub300\ud55c \uc124\uc815\uc744 \uc0ac\uc804\uc5d0 \uc815\uc758\ud574\uc11c \uc0ac\uc6a9\ud558\uae30 \ub54c\ubb38\uc5d0 ~/.juju/environments.yaml \ud30c\uc77c\uc744 \uc218\uc815\ud574\uc57c \ud55c\ub2e4. \uc544\ub798 \uadf8\ub9bc\ucc98\ub7fc maas \ud56d\ubaa9\uc744 \ucc3e\uc544\uc11c \uc138\ubd80 \uc124\uc815\uc744 \ud574\uc8fc\uba74 \ub41c\ub2e4."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.a,{href:"http://13.125.231.217/wp-content/uploads/2016/11/juju-environment.png",children:(0,a.jsx)(t.img,{alt:"juju-environment",src:n(78246).A+"",width:"697",height:"564"})})}),"\n",(0,a.jsx)(t.p,{children:"\ud544\uc218 \uc124\uc815 \ud56d\ubaa9\uc744 \uc815\ub9ac\ud558\uba74 \uc544\ub798\uc640 \uac19\ub2e4."}),"\n",(0,a.jsx)(t.p,{children:"maas-server : MAAS \uc811\uadfc url"}),"\n",(0,a.jsx)(t.p,{children:"maas-oauth : \uacfc\uc815 1\uc5d0\uc11c \ubbf8\ub9ac \ubcf5\uc0ac\ud574 \ub454 maas-key\ub97c \uc785\ub825"}),"\n",(0,a.jsx)(t.p,{children:"admin-secret : \ubb38\uc11c\uc5d0 \uc758\ud558\uba74 random pass-phrase\ub77c\uace0 \ud558\ub294\ub370 \uc5b4\ub514\uc5d0 \uc0ac\uc6a9\ub418\ub294\uc9c0\ub294 \ubaa8\ub974\uaca0\uc9c0\ub9cc \uc5c6\uc73c\uba74 bootstrap\uc774 \uc9c4\ud589\ub418\uc9c0 \uc54a\uc73c\ub2c8 \uc784\uc758\uc758 \uac12\uc744 \uc785\ub825\ud574\uc900\ub2e4."}),"\n",(0,a.jsx)(t.p,{children:"\uc704\uc758 3\uac1c \uac12\uc740 \ud544\uc218\uc774\ub2c8 \uc124\uc815\ud558\uace0 \uc800\uc7a5\ud558\uba74 \uc644\ub8cc."}),"\n",(0,a.jsx)(t.p,{children:"\xa0"}),"\n",(0,a.jsx)(t.h3,{id:"3-bootstrap-with-no-auto-upgrade-option",children:"3. Bootstrap with no-auto-upgrade option"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"(1) Switch environment"})}),"\n",(0,a.jsx)(t.p,{children:"environments.yaml \ud30c\uc77c\uc744 \ub300\ucda9 \ubd24\uc73c\uba74 \uc54c\uaca0\uc9c0\ub9cc \uc5ec\ub7ec\uac00\uc9c0 \ud658\uacbd\uc5d0 \ub300\ud55c \uc124\uc815\uc744 \ud55c \ud30c\uc77c\uc5d0 \ubaa8\ub450 \uc815\uc758\ud558\ub3c4\ub85d \ub418\uc5b4\uc788\ub294\ub370 \uc0c1\ud669\uc5d0 \ub530\ub77c \uc120\ud0dd\uc801\uc73c\ub85c \ud658\uacbd\uc744 \uc9c0\uc815\ud560 \uc218 \uc788\uac8c \ub418\uc5b4\uc788\ub2e4. \ud604\uc7ac juju\uac00 \uc0ac\uc6a9\ud558\ub294 \ud658\uacbd\uc73c\ub85c \uc9c0\uc815\ub41c \uac83\uc740 ~/.juju/current-environment \ud30c\uc77c\uc5d0 \uc800\uc7a5\ub41c\ub2e4. \ub9cc\uc57d maas\uac00 \uae30\ubcf8\uc73c\ub85c \uc9c0\uc815\ub418\uc5b4 \uc788\uc9c0 \uc54a\ub2e4\uba74 \uc544\ub798\uc758 command\ub97c \uc2e4\ud589\ud574\uc57c \ud55c\ub2e4. (environments.yaml \ud30c\uc77c\uc5d0 maas\ub77c\ub294 \uc774\ub984\uc744 \ubcc0\uacbd\ud558\uc9c0 \uc54a\uc740 \uacbd\uc6b0. \ub9cc\uc57d \ubcc0\uacbd\ud588\ub2e4\uba74 \ubcc0\uacbd\ub41c \uc774\ub984\uc73c\ub85c switch)"}),"\n",(0,a.jsx)(t.p,{children:"[bash]"}),"\n",(0,a.jsx)(t.p,{children:"juju switch maas"}),"\n",(0,a.jsx)(t.p,{children:"[/bash]"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"(2) Ready node"})}),"\n",(0,a.jsx)(t.p,{children:"Juju\uac00 MAAS \ub300\uc0c1\uc73c\ub85c bootstrap \uac00\ub2a5\ud55c node\ub294 ready \uc0c1\ud0dc\uc758 node\uc774\ub2e4. \ub2f9\uc5f0\ud558\uaca0\uc9c0\ub9cc \ub2e4\ub978 \uc0ac\uc6a9\uc790\uc758 \uc18c\uc720\ub85c \ub418\uc5b4\uc788\uac70\ub098 (allocated) OS\uac00 deploy\ub41c \uc0c1\ud0dc\uc778 node\uc5d0\ub294 \uc774\ubbf8 \ub2e4\ub978 \uc6a9\ub3c4\ub85c \uc0ac\uc6a9\uc911\uc774\uac70\ub098 \uc608\uc815\uc778 \uac83\uc774\ubbc0\ub85c juju\uac00 \uad00\uc5ec\ud558\uc9c0 \uc54a\uace0 ready\ub85c \ub0a8\uc544\uc788\ub294 node \uc911\uc5d0 \ud558\ub098\ub97c \ubb34\uc791\uc704\ub85c \uace8\ub77c\uc11c bootstrap\uc744 \ud558\uac8c \ub418\ubbc0\ub85c \uc8fc\uc758\ud574\uc57c \ud55c\ub2e4."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"(3) Bootstrap"})}),"\n",(0,a.jsxs)(t.p,{children:["\uc774\uc81c bootstrap\ub9cc \ud558\uba74 \ub418\ub294\ub370 juju 1.25.3\uc5d0\uc11c \uc9c4\ud589\ud574\ubcf4\ub2c8 \uac70\uc758 \ub9c8\uc9c0\ub9c9 \uacfc\uc815\uc5d0\uc11c Waiting for API to become available\uc774 \uc5ec\ub7ec\ubc88 \ubc18\ubcf5\ub418\uba70 \ubd80\ubd84\uc801\uc73c\ub85c\ub9cc bootstrap\uc774 \uc131\uacf5\ud55c \uac83\uc73c\ub85c \uc644\ub8cc\ub418\ub294 \ubb38\uc81c\uac00 \uc788\uc5b4\uc11c ",(0,a.jsx)(t.a,{href:"https://bugs.launchpad.net/juju-core/+bug/1509097",children:"bug report"}),"\ub97c \ucc3e\uc544\ubd24\ub2e4. \ubb38\uc11c \ub0b4\uc6a9\uc5d0 \uc758\ud558\uba74 newer version\uc774 \ud544\uc694\ud55c \uc0c1\ud0dc\ub85c client\uc5d0 \uae30\ub85d\ub418\uace0 \uadf8 \uc815\ubcf4\uac00 bootstrap machine (juju state server\uac00 \ub420 \uc7a5\ube44)\uc5d0 \ub118\uc5b4\uac00\uc11c bootstrap machine\uc5d0\uc11c newer version\uacfc\uc758 \uc5f0\uacb0\uc744 \uacc4\uc18d \uc2dc\ub3c4\ud558\ub294 \uac83 \uac19\ub2e4. \uac1c\uc120\ub420 bug\ub85c \ubcf4\uc774\ub294\ub370 \uc5b4\ucc0c\ub418\uc5c8\ub4e0 1.25.3\uc5d0\uc11c \uadf8\ub7f0 \ubb38\uc81c\ub97c \ubc29\uc9c0\ud558\ub824\uba74 \uc544\ub798\ucc98\ub7fc no-auto-upgrade option\uc744 \ucd94\uac00\ud574\uc900\ub2e4. (v option\uc740 verbose.\ud639\uc2dc \ub354 \ub9ce\uc740 \ub85c\uadf8\ub97c \ubcf4\uace0 \uc2f6\uc73c\uba74 v \ub300\uc2e0 debug \uc635\uc158\uc744 \uc8fc\uba74 \ub418\uaca0\ub2e4.)"]}),"\n",(0,a.jsx)(t.p,{children:"[bash]"}),"\n",(0,a.jsx)(t.p,{children:"juju bootstrap -v --no-auto-upgrade"}),"\n",(0,a.jsx)(t.p,{children:"[/bash]"}),"\n",(0,a.jsx)(t.p,{children:"\uc544\ub798 \uadf8\ub9bc\uacfc \ube44\uc2b7\ud55c \ub0b4\uc6a9\uc774 \ud45c\uc2dc\ub418\uace0 \uc644\ub8cc\ub41c\ub2e4."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.a,{href:"http://13.125.231.217/wp-content/uploads/2016/11/juju-bootstrap.png",children:(0,a.jsx)(t.img,{alt:"juju-bootstrap",src:n(69747).A+"",width:"704",height:"683"})})}),"\n",(0,a.jsx)(t.p,{children:"bootstrap\uc774 \uc815\uc0c1\uc73c\ub85c \uc644\ub8cc\ub418\uace0 juju status \uba85\ub839\uc744 \uc785\ub825\ud574\ubcf4\uba74 \uc544\ub798 \uadf8\ub9bc\ucc98\ub7fc \ud604\uc7ac \uc0c1\ud0dc\uac00 \ud45c\uc2dc\ub418\uace0,"}),"\n",(0,a.jsx)(t.p,{children:"\xa0"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.a,{href:"http://13.125.231.217/wp-content/uploads/2016/11/juju-status.png",children:(0,a.jsx)(t.img,{alt:"juju-status",src:n(86775).A+"",width:"682",height:"564"})})}),"\n",(0,a.jsx)(t.p,{children:"\ud639\uc2dc ssh\ub85c \uc811\uc18d\ud558\uace0 \uc2f6\ub2e4\uba74 \uc544\ub798\uc758 command\ub97c \uc785\ub825\ud558\uba74 \uac04\ub2e8\ud788 \uc811\uc18d\ub41c\ub2e4."}),"\n",(0,a.jsx)(t.p,{children:"[bash]"}),"\n",(0,a.jsx)(t.p,{children:"# connect to juju machine\xa0number '0'"}),"\n",(0,a.jsx)(t.p,{children:"juju ssh 0"}),"\n",(0,a.jsx)(t.p,{children:"[/bash]"})]})}function l(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(j,{...e})}):j(e)}},69747:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/juju-bootstrap-aa2c09b1fa3e9751596138ca2cacee07.png"},78246:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/juju-environment-f9b0cf674f975f370d0fb13cdd565a38.png"},86775:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/juju-status-39f4488462806c960399bae7951a763d.png"},67559:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/maas-keys-192b471029b0797e6537bb43b33d920b.png"},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>i});var a=n(96540);const s={},o=a.createContext(s);function r(e){const t=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(o.Provider,{value:t},e.children)}}}]);