<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Juju로 Azure에서 Hadoop deploy 하기 (간단하게) | My Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://blurblah.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://blurblah.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://blurblah.github.io/2015/11/12/wp/juju로-azure에서-hadoop-deploy-하기-간단하게"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Juju로 Azure에서 Hadoop deploy 하기 (간단하게) | My Site"><meta data-rh="true" name="description" content="1주에 한번씩 스터디 중이고 이번주는 hadoop을 deploy 해서 가야 한다."><meta data-rh="true" property="og:description" content="1주에 한번씩 스터디 중이고 이번주는 hadoop을 deploy 해서 가야 한다."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2015-11-12T00:00:00.000Z"><meta data-rh="true" property="article:tag" content="azure,deploy,expose,hadoop,juju"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://blurblah.github.io/2015/11/12/wp/juju로-azure에서-hadoop-deploy-하기-간단하게"><link data-rh="true" rel="alternate" href="https://blurblah.github.io/2015/11/12/wp/juju로-azure에서-hadoop-deploy-하기-간단하게" hreflang="en"><link data-rh="true" rel="alternate" href="https://blurblah.github.io/2015/11/12/wp/juju로-azure에서-hadoop-deploy-하기-간단하게" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="My Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="My Site Atom Feed"><link rel="stylesheet" href="/assets/css/styles.87564fa0.css">
<script src="/assets/js/runtime~main.e36f3c5d.js" defer="defer"></script>
<script src="/assets/js/main.dfb2dcc2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a class="navbar__item navbar__link" href="/docs/intro">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/blurblah" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2020/01/20/wp/kubernetes에서-특정-node에-pod가-배포되는-현상에-대한-분석">Kubernetes에서 특정 node에 pod가 배포되는 현상에 대한 분석</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2018/08/14/wp/kubernetes-with-aws-api-gateway">Kubernetes with AWS API gateway</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2018/06/09/wp/날씨-정보를-편하게-받아볼까-해서-시작한-일들">날씨 정보를 편하게 받아볼까 해서 시작한 일들</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2018/05/27/wp/xiaomi-센서로-실내-온도를-측정해서-influxdb에-저장하고-grafana로-그">Xiaomi 센서로 실내 온도를 측정해서 InfluxDB에 저장하고 Grafana로 그린다</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2018/05/17/wp/snmp를-통한-asus-공유기-모니터링-시작하기">SNMP를 통한 ASUS 공유기  모니터링 시작하기</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="1주에 한번씩 스터디 중이고 이번주는 hadoop을 deploy 해서 가야 한다."><header><h1 class="title_f1Hy" itemprop="headline">Juju로 Azure에서 Hadoop deploy 하기 (간단하게)</h1><div class="container_mt6G margin-vert--md"><time datetime="2015-11-12T00:00:00.000Z" itemprop="datePublished">November 12, 2015</time> · <!-- -->4 min read</div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>1주에 한번씩 스터디 중이고 이번주는 hadoop을 deploy 해서 가야 한다.</p>
<p>Hadoop에 대해서는 잘 모른다. 하지만 배우면 되겠지라고 생각하면서 시작.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-juju-charm"><strong>1. Juju charm</strong><a href="#1-juju-charm" class="hash-link" aria-label="Direct link to 1-juju-charm" title="Direct link to 1-juju-charm">​</a></h4>
<p>Charm을 찾아보니 간단하게 기술되어 있다.</p>
<p>(Charm 자체는 간단하겠지만 hadoop에 대한 내용은 어려울 것이다.)</p>
<p><a href="https://blurblah.net/wp-content/uploads/2015/11/hadoop-charm.png" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" alt="hadoop-charm" src="/assets/images/hadoop-charm-d90434c7dec06b13a762fe689811098e.png" width="620" height="307" class="img_ev3q"></a></p>
<p>기술된 내용을 읽다보니 HDFS와 MapReduce가 혼합된 형태로 deploy 하는 부분이 있다.</p>
<p>Scale out을 위해 분리된 형태로 deploy 하는 내용도 있었지만 일단은 가볍게 시작하기로 하고 순식간에 deploy / relation 완료.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-web-ui"><strong>2. Web UI</strong><a href="#2-web-ui" class="hash-link" aria-label="Direct link to 2-web-ui" title="Direct link to 2-web-ui">​</a></h4>
<p>Apache Hadoop 페이지를 대강이라도 읽어두어야겠다는 생각이 들어서 살펴보니 Hadoop cluster를 올리고나면 web ui가 있으니 확인해보라는 내용이 있었다. Name node는 default 50070, Resource manager라는 애는 default port가 8088이다. 그런데...위의 이미지처럼 간단하게 deploy를 해보니 Azure (연습용이라 Azure를 사용한다)에 생성된 VM에 Endpoint 설정이 SSH 말고는 되어있질 않았다. 역시 이런 부분은 문제가 있다고 생각하며 넘어가기로 했다.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-listening-port-확인"><strong>3. Listening port 확인</strong><a href="#3-listening-port-확인" class="hash-link" aria-label="Direct link to 3-listening-port-확인" title="Direct link to 3-listening-port-확인">​</a></h4>
<p>설마 혹시 제대로 deploy가 안된 것은 아닌가 다른 문제가 있는 것은 아닌가 의심하기 시작. 하지만 로그를 봤을 때 특이사항이 없었으므로 Apache 문서가 맞다면, 또 deploy가 제대로 되었다면 port는 listen 상태로 있겠지라는 생각이 들었다. 그래서 netstat.</p>
<p><a href="https://blurblah.net/wp-content/uploads/2015/11/hadoop-netstat.png" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" alt="hadoop-netstat" src="/assets/images/hadoop-netstat-9a9057ff4c5e0d54fdc6e1cb9864b2b3.png" width="654" height="450" class="img_ev3q"></a>Hadoop의 구조는 잘 모르지만 master, slave로 나뉘어 있는 것으로 보아 master만 보면 되겠다며 port를 확인하니 Apache 문서대로 8088, 50070 등의 port로 들을 준비를 하고 있더라. 그렇다면 문제는 하나.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-expose"><strong>4. Expose</strong><a href="#4-expose" class="hash-link" aria-label="Direct link to 4-expose" title="Direct link to 4-expose">​</a></h4>
<p>Charm 문서에는 기술되어 있지 않지만 Azure endpoint 설정이 안  되어 있으므로 expose를 해보기로 했다. (직접 VM에서 열어도 되지만...) 해보니 자동으로 몇 개 설정이 추가된다.</p>
<p><a href="https://blurblah.net/wp-content/uploads/2015/11/hadoop-azure-endpoints.png" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" alt="hadoop-azure-endpoints" src="/assets/images/hadoop-azure-endpoints-c4a3facf3905818761ab87c9ee056dcd.png" width="915" height="332" class="img_ev3q"></a>그런데 왠지 중요해보이는 resource manager가 사용할거라던 8088은 추가되지 않았다.</p>
<p>그래서 손으로 추가.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="5-hadoop-resource-manager"><strong>5. Hadoop Resource Manager</strong><a href="#5-hadoop-resource-manager" class="hash-link" aria-label="Direct link to 5-hadoop-resource-manager" title="Direct link to 5-hadoop-resource-manager">​</a></h4>
<p>접속해보니 잘 열린다. hadoop-slavecluster를 deploy 한 후 unit을 2개 더 추가했기 때문에 총 3개가 active node로 잡힌다.</p>
<p><a href="https://blurblah.net/wp-content/uploads/2015/11/hadoop-resourcemanager.png" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" alt="hadoop-resourcemanager" src="/assets/images/hadoop-resourcemanager-1024x650-cbab24ae22a04ac1e6b33fd22e1d0eae.png" width="1024" height="650" class="img_ev3q"></a>근데 이것으로 무엇을 해야하는건지는 모르겠다.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="6-결론"><strong>6. 결론</strong><a href="#6-결론" class="hash-link" aria-label="Direct link to 6-결론" title="Direct link to 6-결론">​</a></h4>
<p>Juju로 hadoop cluster 구성하는건 매우 간단하다.</p>
<p>하지만 Azure로 진행하는건 여전히 몇가지 문제가 있다.</p>
<p>Azure의 특성 때문이기도 하지만 charm을 만들 때 고려해야할 문제이기도 한 것 같다.</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/azure">azure</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/deploy">deploy</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/expose">expose</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/hadoop">hadoop</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/juju">juju</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/2015/11/18/wp/u-tv와-공유기-동시-사용시-ddns-활성화-방안"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">U+ TV와 공유기 동시 사용시 DDNS 활성화 방안</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/2015/10/07/wp/infected-jenkins"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Infected Jenkins</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>